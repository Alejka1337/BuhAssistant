# üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ .ipa —Ñ–∞–π–ª–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API

## ‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å: `application-f38c0a8d-f6d9-4d5a-b61b-f6e831c3c0d7.ipa`

---

## üöÄ –°–ø–æ—Å–æ–± 1: TestFlight (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±
- ‚úÖ –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞–º–∏
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç Apple

### –®–∞–≥–∏:

**1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ TestFlight:**
```bash
eas submit --platform ios --profile production
```

EAS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–≥—Ä—É–∑–∏—Ç `.ipa` –≤ App Store Connect
- –û–±—Ä–∞–±–æ—Ç–∞–µ—Ç –±–∏–ª–¥ (5-10 –º–∏–Ω—É—Ç)
- –°–¥–µ–ª–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤ TestFlight

**2. –ù–∞ iPhone:**
1. –°–∫–∞—á–∞–π—Ç–µ **TestFlight** –∏–∑ App Store (–µ—Å–ª–∏ –Ω–µ—Ç)
2. –û—Ç–∫—Ä–æ–π—Ç–µ TestFlight
3. –ù–∞–π–¥–∏—Ç–µ **eGlavBuh**
4. –ù–∞–∂–º–∏—Ç–µ **Install**
5. –ì–æ—Ç–æ–≤–æ! üéâ

---

## üîß –°–ø–æ—Å–æ–± 2: –ü—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)

### –ß–µ—Ä–µ–∑ Xcode:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Xcode**
2. **Window** ‚Üí **Devices and Simulators** (‚áß‚åò2)
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ iPhone –ø–æ USB
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à iPhone –≤ —Å–ø–∏—Å–∫–µ
5. Drag & Drop —Ñ–∞–π–ª `.ipa` –≤ —Ä–∞–∑–¥–µ–ª **"Installed Apps"**
6. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ß–µ—Ä–µ–∑ Apple Configurator 2:

1. –°–∫–∞—á–∞–π—Ç–µ **Apple Configurator 2** –∏–∑ Mac App Store
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ iPhone
4. Drag & Drop `.ipa` —Ñ–∞–π–ª –Ω–∞ –∏–∫–æ–Ω–∫—É –≤–∞—à–µ–≥–æ iPhone
5. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API URL

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–µ–∫—É—â–∏–π –±–∏–ª–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π ngrok URL!

–¢–µ–∫—É—â–∏–π URL –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
```
https://e637d023274f.ngrok-free.app
```

**–≠—Ç–æ—Ç URL —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –£–ñ–ï –ù–ï –†–ê–ë–û–¢–ê–ï–¢!**

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API URL

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–Ω–æ–≤—ã–π ngrok)

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:**
```bash
cd /Users/alejka1337/Desktop/buhassistant/backend
ngrok http 8000
```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok-free.app`)

3. **–û–±–Ω–æ–≤–∏—Ç–µ `app.json`:**
```json
{
  "expo": {
    "extra": {
      "apiUrl": "https://NEW_NGROK_URL.ngrok-free.app"
    }
  }
}
```

4. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
eas build --platform ios --profile production
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: Production (AWS EC2)

–ö–æ–≥–¥–∞ –¥–µ–ø–ª–æ–∏—Ç–µ –Ω–∞ AWS:

1. **–û–±–Ω–æ–≤–∏—Ç–µ `app.json`:**
```json
{
  "expo": {
    "extra": {
      "apiUrl": "https://api.eglavbuh.com"
    }
  }
}
```

2. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:**
```bash
eas build --platform ios --profile production
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (–≤—Ä–µ–º–µ–Ω–Ω–æ)

–ï—Å–ª–∏ iPhone –∏ Mac –≤ –æ–¥–Ω–æ–π Wi-Fi —Å–µ—Ç–∏:

1. **–£–∑–Ω–∞–π—Ç–µ IP Mac:**
```bash
ipconfig getifaddr en0
# –ü—Ä–∏–º–µ—Ä: 192.168.0.102
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ `app.json`:**
```json
{
  "expo": {
    "extra": {
      "apiUrl": "http://192.168.0.102:8000"
    }
  }
}
```

3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- –ß–µ—Ä–µ–∑ TestFlight –ò–õ–ò
- –ß–µ—Ä–µ–∑ Xcode/Configurator

### –®–∞–≥ 2: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ **eGlavBuh**
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (—Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏–∞–ª–æ–≥)
3. –ï—Å–ª–∏ –ø—Ä–æ—Å–∏—Ç - —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥—Ä—É–≥–∏–µ permissions

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ backend

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —ç–∫—Ä–∞–Ω **"–ù–æ–≤–∏–Ω–∏"**
2. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –Ω–æ–≤–æ—Å—Ç–∏ ‚Üí ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å API URL

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π API URL:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –í –∫–æ–Ω—Å–æ–ª–∏ Xcode (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω iPhone) —É–≤–∏–¥–∏—Ç–µ:
```
üîó API_URL: https://...
üîß Environment: Production
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. **–ü—Ä–æ—Ñ—ñ–ª—å** ‚Üí **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è**
2. –í–∫–ª—é—á–∏—Ç–µ –æ–±–∞ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. –ù–∞–∂–º–∏—Ç–µ **"–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"**
4. –ß–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ push! üéâ

**–ï—Å–ª–∏ –Ω–µ –ø—Ä–∏—à–ª–æ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ä–∞–∑—Ä–µ—à–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ iOS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞:
```bash
docker-compose logs -f celery_worker | grep -i push
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ API

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:

```typescript
// constants/api.ts
export const API_URL = Constants.expoConfig?.extra?.apiUrl || DEFAULT_API_URL;
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚úÖ `app.json` ‚Üí `extra.apiUrl` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
2. ‚úÖ `DEFAULT_API_URL` (–µ—Å–ª–∏ `extra.apiUrl` –Ω–µ —É–∫–∞–∑–∞–Ω)

**–¢–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- `extra.apiUrl`: `https://e637d023274f.ngrok-free.app`
- `DEFAULT_API_URL` (DEV): `http://192.168.0.102:8000`
- `DEFAULT_API_URL` (PROD): `https://e637d023274f.ngrok-free.app`

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ backend

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—É—Å—Ç—ã–µ —ç–∫—Ä–∞–Ω—ã
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
- "Network request failed"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `app.json` ‚Üí `extra.apiUrl`
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º URL

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ iOS Settings
2. ‚úÖ –í–∫–ª—é—á–µ–Ω—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –ë–∏–ª–¥ —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ EAS (–Ω–µ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Xcode)

**–õ–æ–≥–∏:**
```bash
# Backend:
docker-compose logs -f web | grep -i push

# Celery:
docker-compose logs -f celery_worker | grep -i push
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "Untrusted Enterprise Developer"

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
1. Settings ‚Üí General ‚Üí VPN & Device Management
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à profile
3. –ù–∞–∂–º–∏—Ç–µ **Trust**

---

## üìã Checklist –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] API URL –æ–±–Ω–æ–≤–ª–µ–Ω –≤ `app.json`
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ iPhone
- [ ] –†–∞–∑—Ä–µ—à–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ iOS
- [ ] iPhone –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- [ ] (–ï—Å–ª–∏ ngrok) ngrok –∑–∞–ø—É—â–µ–Ω –∏ URL –∞–∫—Ç—É–∞–ª–µ–Ω

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ TestFlight** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
2. **–û–±–Ω–æ–≤–∏—Ç–µ API URL** –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π
3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - ‚úÖ –ù–æ–≤–æ—Å—Ç–∏
   - ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å
   - ‚úÖ –§–æ—Ä—É–º
   - ‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - ‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ù–æ–≤—ã–π –±–∏–ª–¥ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º API:
eas build --platform ios --profile production

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ TestFlight:
eas submit --platform ios --profile production

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±–∏–ª–¥—ã:
eas build:list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials:
eas credentials

# –ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok:
ngrok http 8000
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º! üéâüì±

