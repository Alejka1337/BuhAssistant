# Hotfix: Кнопка меню для жалоб и блокировок

## Проблема
Пользователь не видел кнопку меню (⋮) для подачи жалоб на топики и комментарии.

## Исправления

### 1. TypeScript ошибки
- ❌ Использовали `post.user` вместо `post.author`
- ❌ Использовали `thread.user` вместо `thread.author`
- ✅ Исправлено на правильные поля из интерфейсов

### 2. Добавлено логирование для отладки

**В `[id].tsx`:**
- Лог при загрузке топика (показывает thread_user_id и current_user_id)
- Лог при нажатии кнопки меню топика
- Лог при вызове showPostMenu

**В `PostItem.tsx`:**
- Лог при нажатии кнопки меню комментария

### 3. Улучшен UX
- Добавлен `hitSlop` для кнопок меню (легче нажать)
- Улучшены стили menuButton

## Как проверить

### Проверка кнопки меню на топике
1. Откройте **чужой** топик (не ваш)
2. В header топика справа от количества просмотров должна быть кнопка **⋮**
3. Нажмите её - должно появиться меню с двумя опциями:
   - Поскаржитися
   - Заблокувати автора

### Проверка кнопки меню на комментарии
1. Откройте топик с комментариями от других пользователей
2. Под каждым **чужим** комментарием должна быть кнопка **⋮** (справа от "Відповісти")
3. Нажмите её - должно появиться меню:
   - Поскаржитися
   - Заблокувати користувача

### Важно
- ✅ Кнопка **НЕ** должна показываться на **ваших** топиках/комментариях
- ✅ Кнопка должна показываться только для авторизованных пользователей
- ✅ При нажатии в консоли должны быть логи (для отладки)

## Консольные логи для отладки

После загрузки топика:
```
Thread loaded: {
  thread_id: 1,
  thread_user_id: 2,
  current_user_id: 1,
  should_show_menu: true
}
```

При нажатии кнопки меню топика:
```
Menu button pressed for thread: 1
```

При вызове меню комментария:
```
showPostMenu called for post: {
  post_id: 5,
  post_user_id: 2,
  current_user_id: 1,
  is_own_post: false
}
```

При нажатии кнопки меню комментария:
```
PostItem menu button pressed: {
  post_id: 5,
  post_user_id: 2,
  currentUserId: 1,
  isAuthor: false
}
```

## Если кнопка не видна

Проверьте логи:
1. Правильно ли определяется `current_user_id`?
2. `should_show_menu: true`?
3. Это не ваш топик/комментарий?

## Ошибки CoreGraphics

Ошибки типа:
```
[CoreGraphics] Error: this application... has passed an invalid numeric value (NaN, or not-a-number)
```

Это **не критично**. Обычно связано с анимациями React Native или размерами view. Не влияет на функциональность приложения.

## Статус
✅ TypeScript ошибки исправлены  
✅ Логирование добавлено  
✅ UX улучшен  
✅ Готово к тестированию

---
**Дата:** 2 декабря 2025

